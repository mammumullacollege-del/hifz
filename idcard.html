<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DSAC | Student ID Card</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <style>
    :root {--islamic-green:#0a5c36;--islamic-gold:#c19a3f;--islamic-cream:#f8f3e6;--dark-green:#064e3b;--transition:all 0.3s ease;}
    body {font-family:'Poppins',sans-serif;background-color:var(--islamic-cream);color:#333;padding-top:80px;overflow-x:hidden;}
    a {text-decoration: none !important;}
    .pattern-bg {background-image:radial-gradient(circle at 25% 25%,rgba(10,92,54,0.03) 2px,transparent 2px),radial-gradient(circle at 75% 75%,rgba(193,154,63,0.03) 2px,transparent 2px);background-size:50px 50px;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;}
    .navbar-optimized {
      background: linear-gradient(135deg, var(--islamic-green), var(--dark-green)); border-bottom: 3px solid var(--islamic-gold); transition: var(--transition); padding: 0.5rem 0; height: 80px; z-index: 1030 !important;
    }
    .navbar-toggler {border-color: rgba(255, 255, 255, 0.5);}
    .navbar-toggler:focus {box-shadow: 0 0 0 2px var(--islamic-gold);}
    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.9%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }
    .navbar-optimized.scrolled {
      background: rgba(10, 92, 54, 0.98); box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); height: 70px;
    }
    .navbar-brand-compact img {
      border-radius: 8px; transition: transform 0.3s ease; width: 60px; height: 60px; object-fit: contain; filter: brightness(0) invert(1); border: none; box-shadow: 0 0 0 2px var(--islamic-gold); padding: 0;
    }
    .navbar-optimized.scrolled .navbar-brand-compact img {width: 50px; height: 50px;}
    .navbar-brand-compact:hover img {transform: scale(1.05);}
    .brand-text {font-size: 1.2rem; line-height: 1.2;}
    .brand-subtext {font-size: 0.8rem; opacity: 0.9;}
    .nav-link-optimized {
      color: #fff !important; font-weight: 500; transition: var(--transition); padding-left: 0.4rem; padding-right: 0.4rem; border-radius: 5px; margin: 0 2px; white-space: nowrap;
    }
    .nav-item-optimized {margin: 0 2px;}
    .nav-link-optimized:hover {color: var(--islamic-gold) !important; background: rgba(255, 255, 255, 0.1);}
    .dropdown-menu-optimized {background:var(--islamic-green);border:1px solid var(--islamic-gold);border-radius:8px;}
    .dropdown-item-optimized {color:white;padding:0.5rem 1rem;text-decoration: none !important;}
    .dropdown-item-optimized:hover {background:var(--islamic-gold);color:var(--islamic-green);}
    
    @media (min-width: 992px) {
      .dropdown-submenu {position: relative;}
      .dropdown-submenu:hover > .collapse {display: block !important;}
      .dropdown-submenu .collapse {
        position: absolute;
        top: 0;
        left: 100%;
        z-index: 1000;
        min-width: 12rem;
        padding: 0.5rem 0;
        margin: 0;
        font-size: 1rem;
        background-color: var(--islamic-green);
        border: 1px solid var(--islamic-gold);
        border-radius: 0 0.5rem 0.5rem 0.5rem;
      }
      .dropdown-submenu > a:after {
        content: "‚Ä∫";
        float: right;
        margin-right: -0.5rem;
        font-size: 1.2rem;
      }
    }
    @media (max-width: 991px) {
      .dropdown-submenu .collapse {
        position: static;
        width: auto;
        border: none;
        box-shadow: none;
        background: rgba(0,0,0,0.1);
        margin-left: 1.2rem;
      }
    }
    
    .page-header {background:linear-gradient(135deg,var(--islamic-green),var(--dark-green));color:white;height:30vh;min-height:220px;display:flex;align-items:center;justify-content:center;margin-bottom:3rem;border-bottom:5px solid var(--islamic-gold);text-align:center;}
    .page-title {font-family:'Scheherazade New',serif;font-size:3.5rem;font-weight:700;margin-bottom:1rem;color:var(--islamic-gold);width:100%;}
    .page-subtitle {font-size:1.4rem;opacity:0.95;max-width:800px;margin:0 auto;color:var(--islamic-cream);width:100%;}
    .content-section {padding:4rem 0;background:var(--islamic-cream);}
    .section-title {color:var(--islamic-green);font-weight:700;display:inline-block;padding:0 1rem;background:var(--islamic-cream);position:relative;z-index:2;margin-bottom:0.5rem;font-size:2.5rem;}
    .section-header::before {content:'';position:absolute;top:50%;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,var(--islamic-gold),transparent);z-index:1;}
    .btn-gold {background:linear-gradient(135deg,var(--islamic-gold),#d4af37);border:none;color:var(--islamic-green);font-weight:600;border-radius:8px;box-shadow:0 4px 15px rgba(193,154,63,0.3);padding:0.75rem 1.5rem;text-decoration: none !important;}
    .btn-gold:hover {background:linear-gradient(135deg,#d4af37,var(--islamic-gold));box-shadow:0 6px 20px rgba(193,154,63,0.4);transform:translateY(-2px);}
    .btn-outline-gold {border:2px solid var(--islamic-gold);color:var(--islamic-gold);background:transparent;border-radius:8px;padding:0.75rem 1.5rem;font-weight:600;text-decoration: none !important;}
    .btn-outline-gold:hover {background:var(--islamic-gold);color:var(--islamic-green);}
    .id-card-form-container {background:white;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.1);padding:2.5rem;max-width:450px;margin:0 auto;border:2px solid var(--islamic-gold);}
    .id-card-form-container::before {content:'';position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(90deg,var(--islamic-green),var(--islamic-gold));border-radius:15px 15px 0 0;}
    .form-logo {width:80px;height:80px;object-fit:contain;margin:0 auto 1rem;display:block;border-radius:10px;border:2px solid var(--islamic-gold);padding:5px;}
    .form-title {color:var(--islamic-green);font-weight:700;text-align:center;margin-bottom:0.5rem;font-size:1.5rem;}
    .form-subtitle {color:#666;text-align:center;margin-bottom:2rem;font-size:0.95rem;}
    .form-control {border:2px solid rgba(10,92,54,0.2);border-radius:8px;padding:0.75rem 1rem;font-size:0.95rem;margin-bottom:1.2rem;}
    .form-control:focus {border-color:var(--islamic-gold);box-shadow:0 0 0 3px rgba(193,154,63,0.1);}
    .form-label {color:var(--islamic-green);font-weight:500;margin-bottom:0.5rem;font-size:0.9rem;}
    .id-card-info {background:rgba(10,92,54,0.05);border-radius:10px;padding:1.5rem;margin-top:2rem;border:1px solid rgba(10,92,54,0.1);}
    .id-card-info h5 {color:var(--islamic-green);font-weight:600;margin-bottom:0.8rem;font-size:1.1rem;}
    .id-card-info ul {padding-left:1.2rem;margin-bottom:0;}
    .id-card-info li {margin-bottom:0.5rem;color:#555;font-size:0.9rem;}
    .footer {background:linear-gradient(135deg,var(--dark-green),var(--islamic-green));border-top:3px solid var(--islamic-gold);padding:3rem 0 1.5rem;color:white;}
    .footer-brand {font-size:1.8rem;font-weight:700;color:var(--islamic-gold);margin-bottom:1rem;}
    .social-links {display:flex;gap:12px;margin-top:1rem;}
    .social-icon {width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;background:rgba(255,255,255,0.1);font-size:1.1rem;text-decoration: none !important;}
    .social-icon:hover {transform:translateY(-5px);background:var(--islamic-gold);color:var(--islamic-green);}
    .footer-links h5 {color:var(--islamic-gold);margin-bottom:1.2rem;font-size:1.1rem;font-weight:600;}
    .footer-links a {display:block;color:rgba(255,255,255,0.85);margin-bottom:0.6rem;text-decoration: none !important;}
    .footer-links a:hover {color:var(--islamic-gold);padding-left:5px;}
    .whatsapp-float {position:fixed;bottom:25px;right:15px;width:60px;height:60px;background:linear-gradient(135deg,#25D366,#128C7E);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.6rem;box-shadow:0 10px 25px rgba(37,211,102,0.3);z-index:1000;animation:float 3s ease-in-out infinite;text-decoration: none !important;}
    .whatsapp-float:hover {transform:scale(1.1) rotate(10deg);box-shadow:0 15px 30px rgba(37,211,102,0.4);}
    @keyframes float {0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);}}
      .islamic-ornament {position:fixed;color:var(--islamic-gold);opacity:0.08;font-size:1.8rem;z-index:-1;pointer-events:none;}
      .ornament-1 {top:20%;left:5%;animation:float 6s ease-in-out infinite;}
      .ornament-2 {top:60%;right:5%;animation:float 8s ease-in-out infinite reverse;}
      .ornament-3 {bottom:20%;left:10%;animation:float 7s ease-in-out infinite;}
    @media (max-width:768px){body{padding-top:70px!important;}.navbar-optimized{height:70px;}.page-header{height:26vh;min-height:180px;}.page-title{font-size:2.2rem;}.page-subtitle{font-size:1.1rem;}.content-section{padding:2.5rem 0;}.section-title{font-size:1.8rem;}.navbar-collapse{background:var(--dark-green);padding:1rem;border-radius:0 0 10px 10px;border:1px solid var(--islamic-gold);margin-top:0;}.id-card-form-container{padding:2rem;margin:0 1rem;}.form-logo{width:70px;height:70px;}}
    @media (max-width:576px){.page-title{font-size:1.8rem;}.section-title{font-size:1.5rem;}.id-card-form-container{padding:1.5rem;}.form-title{font-size:1.3rem;}}
  </style>
</head>
<body>
  <div class="islamic-ornament ornament-1">‚ú∏</div><div class="islamic-ornament ornament-2">‚ú∏</div><div class="islamic-ornament ornament-3">‚ú∏</div>
  <div id="navbar-container"></div>
  <div class="page-header"><div class="container"><div class="page-header-content text-center"><h1 class="page-title">Student ID Card</h1><p class="page-subtitle">Generate your official college student identification card</p></div></div></div>
  <section class="content-section"><div class="container"><div class="row justify-content-center"><div class="col-lg-6">
    <div class="id-card-form-container" data-aos="fade-up">
      <img src="https://i.postimg.cc/rmS5jXXX/COLLEGE-LOGO.png" alt="College Logo" class="form-logo">
      <h3 class="form-title">DARUNNAJATH SHAREEATH & ARTS COLLEGE</h3>
      <p class="form-subtitle">Punnakkad, Karuvarakundu</p>
      <form id="idForm">
        <input type="hidden" name="type" value="student">
        <div class="mb-3"><label class="form-label">Admission Number</label><input type="text" name="uid" class="form-control" placeholder="Enter your admission number" required></div>
        <div class="mb-3"><label class="form-label">Date of Birth</label><input type="date" name="dob" class="form-control" required></div>
        <button type="submit" class="btn-gold w-100 py-3"><i class="fas fa-id-card me-2"></i>Generate Student ID Card</button>
      </form>
      <div class="id-card-info mt-4">
        <h5><i class="fas fa-info-circle me-2"></i>Important Information</h5>
        <ul><li>Admission number is provided during admission</li><li>Use date of birth as registered with college</li><li>ID card contains QR code for verification</li><li>You can print the ID card for official use</li><li>Contact college office for any corrections</li></ul>
      </div>
    </div>
    </div>
    </div>

    <div class="text-center mt-5" data-aos="fade-up"><a href="index.html" class="btn-outline-gold btn-lg px-5"><i class="fas fa-home me-2"></i>Back to Home</a></div>
   </div>
  </section>
  <div id="footer-container"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init({duration:800,once:true,offset:50,disable:window.innerWidth<768});
    window.addEventListener('scroll',function(){const navbar=document.querySelector('.navbar-optimized');const scrollTop=window.pageYOffset||document.documentElement.scrollTop;navbar.classList.toggle('scrolled',scrollTop>50);});
    const scriptURL='https://script.google.com/macros/s/AKfycbwv_2BtMwVnl7C7EMvi-vVC3LmhagvllQ6rphmg0NlGI3WgkqUkvrILUlNM6aGqxjiI/exec';
    
    function formatDateToDDMMYYYY(dateStr) {
      if (!dateStr) return '';
      const parts = dateStr.split('-');
      if (parts.length === 3) {
        return `${parts[2]}-${parts[1]}-${parts[0]}`;
      }
      return dateStr;
    }
    
    document.getElementById('idForm').addEventListener('submit',function(e){
      e.preventDefault();
      const formData=new FormData(e.target);
      const uidVal=formData.get('uid');
      const dobVal=formData.get('dob');
      const typeVal=formData.get('type');
      const url=`${scriptURL}?uid=${encodeURIComponent(uidVal)}&dob=${encodeURIComponent(dobVal)}&type=${encodeURIComponent(typeVal)}`;
      const newWin=window.open("","_blank");
      
      newWin.document.write(`<!DOCTYPE html><html><head><title>Loading...</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>
        @media print{body{margin:0;padding:0;}.no-print{display:none!important;}.id-card{margin:0;box-shadow:none;border:1px solid #000;}}
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Poppins',sans-serif;background:#f0f4ff;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px;}
        .id-card{width:300px;height:470px;background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2);border:3px solid #0a5c36;}
        .header{background:#0a5c36;color:white;padding:12px 8px;text-align:center;border-bottom:3px solid #c19a3f;}
        .header h3{font-size:15px;font-weight:700;margin:0;line-height:1.3;letter-spacing:0.5px;}
        .header p{font-size:10px;margin:5px 0 0;opacity:0.95;font-weight:500;}
        .content{padding:15px;}
        .photo-qr-row{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;gap:10px;}
        .photo-section{text-align:center;flex:1;}
        .student-photo{width:110px;height:130px;object-fit:cover;border:2px solid #0a5c36;border-radius:5px;background:#f8f9fa;}
        .photo-label{font-size:10px;color:#666;margin-top:5px;}
        .qr-section{text-align:center;flex:0.8;margin-top:10px;}
        .qr-code{width:90px;height:90px;background:white;padding:2px;border:2px solid #0a5c36;border-radius:5px;}
        .qr-code img{width:100%;height:100%;object-fit:contain;}
        .qr-label{font-size:8px;color:#666;margin-top:3px;}
        .student-name{text-align:center;color:#0a5c36;font-size:18px;font-weight:700;margin-bottom:12px;padding-bottom:5px;border-bottom:2px solid #0a5c36;}
        .details{display:grid;grid-template-columns:1fr;gap:2px;margin-bottom:15px;}
        .detail-row{display:flex;font-size:11px;line-height:1.2;min-height:18px;}
        .detail-label{color:#0a5c36;font-weight:600;min-width:100px;}
        .detail-value{color:#333;flex:1;font-weight:500;}
        .footer{text-align:center;margin-top:10px;padding-top:10px;border-top:1px dashed #ccc;}
        .year{color:#0a5c36;font-weight:600;font-size:12px;}
        .signature{font-size:9px;color:#666;margin-top:5px;}
        .controls{display:flex;justify-content:center;gap:15px;margin-top:20px;}
        .btn-print{background:#0a5c36;color:white;border:none;padding:10px 25px;border-radius:20px;font-weight:600;cursor:pointer;font-size:14px;box-shadow:0 4px 10px rgba(10,92,54,0.2);}
        .btn-print:hover{background:#064e3b;}
        .btn-close{background:#dc3545;color:white;border:none;padding:10px 25px;border-radius:20px;font-weight:600;cursor:pointer;font-size:14px;box-shadow:0 4px 10px rgba(220,53,69,0.2);}
        .btn-close:hover{background:#bb2d3b;}
      </style></head><body>
        <div class="id-card">
          <div class="header">
            <h3>DARUNNAJATH SHAREEATH & ARTS COLLEGE</h3>
            <p>Punnakkad, Karuvarakundu | Official Student ID Card</p>
          </div>
          <div class="content">
            <div class="photo-qr-row">
              <div class="photo-section"><img src="" alt="Photo" class="student-photo"></div>
              <div class="qr-section"><div class="qr-code"><img src="" alt="QR"></div><div class="qr-label">SCAN TO VERIFY</div></div>
            </div>
            <h2 class="student-name">Loading...</h2>
            <div class="details">
              <div class="detail-row"><span class="detail-label">ADMISSION NO:</span><span class="detail-value">${uidVal}</span></div>
              <div class="detail-row"><span class="detail-label">FATHER:</span><span class="detail-value">Loading...</span></div>
              <div class="detail-row"><span class="detail-label">DATE OF BIRTH:</span><span class="detail-value">${dobVal}</span></div>
              <div class="detail-row"><span class="detail-label">BATCH:</span><span class="detail-value">Loading...</span></div>
              <div class="detail-row"><span class="detail-label">PHONE:</span><span class="detail-value">Loading...</span></div>
            </div>
            <div class="footer">
              <div class="year">ACADEMIC YEAR 2025-26</div>
              <div class="signature">PRINCIPAL'S SIGNATURE</div>
            </div>
          </div>
        </div>
        <div class="controls no-print">
          <button class="btn-print" onclick="window.print()">üñ®Ô∏è Print ID Card</button>
          <button class="btn-close" onclick="window.close()">‚úï Close Window</button>
        </div>
      </body></html>`);
      
      fetch(url).then(res=>res.json()).then(data=>{
        if(data.result==='success'){
          const s=data.student;
          const formattedDOB = formatDateToDDMMYYYY(s.DateOfBirth || dobVal);
          const qrData=`DSAC STUDENT ID CARD\nADMISSION NO: ${s.UID}\nNAME: ${s.FullName}\nFATHER: ${s.FatherName}\nDOB: ${formattedDOB}\nBATCH: ${s.BatchNumber}\nPHONE: ${s.Phone}`;
          const qrURL=`https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(qrData)}&size=90x90&margin=0&color=0a5c36`;
          const photoURL=s.PhotoURL||'https://via.placeholder.com/110x130?text=Photo';
          
          const html=`<!DOCTYPE html><html><head><title>${s.FullName}|Student ID Card</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>
            @media print{body{margin:0;padding:0;}.no-print{display:none!important;}.id-card{margin:0;box-shadow:none;border:1px solid #000;}}
            *{margin:0;padding:0;box-sizing:border-box;}
            body{font-family:'Poppins',sans-serif;background:#f0f4ff;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px;}
            .id-card{width:300px;height:470px;background:white;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2);border:3px solid #0a5c36;}
            .header{background:#0a5c36;color:white;padding:12px 8px;text-align:center;border-bottom:3px solid #c19a3f;}
            .header h3{font-size:15px;font-weight:700;margin:0;line-height:1.3;letter-spacing:0.5px;}
            .header p{font-size:10px;margin:5px 0 0;opacity:0.95;font-weight:500;}
            .content{padding:15px;}
            .photo-qr-row{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;gap:10px;}
            .photo-section{text-align:center;flex:1;}
            .student-photo{width:110px;height:130px;object-fit:cover;border:2px solid #0a5c36;border-radius:5px;background:#f8f9fa;}
            .photo-label{font-size:10px;color:#666;margin-top:5px;}
            .qr-section{text-align:center;flex:0.8;margin-top:10px;}
            .qr-code{width:90px;height:90px;background:white;padding:2px;border:2px solid #0a5c36;border-radius:5px;}
            .qr-code img{width:100%;height:100%;object-fit:contain;}
            .qr-label{font-size:8px;color:#666;margin-top:3px;}
            .student-name{text-align:center;color:#0a5c36;font-size:18px;font-weight:700;margin-bottom:12px;padding-bottom:5px;border-bottom:2px solid #0a5c36;}
            .details{display:grid;grid-template-columns:1fr;gap:2px;margin-bottom:15px;}
            .detail-row{display:flex;font-size:11px;line-height:1.2;min-height:18px;}
            .detail-label{color:#0a5c36;font-weight:600;min-width:100px;}
            .detail-value{color:#333;flex:1;font-weight:500;}
            .footer{text-align:center;margin-top:10px;padding-top:10px;border-top:1px dashed #ccc;}
            .year{color:#0a5c36;font-weight:600;font-size:12px;}
            .signature{font-size:9px;color:#666;margin-top:5px;}
            .controls{display:flex;justify-content:center;gap:15px;margin-top:20px;}
            .btn-print{background:#0a5c36;color:white;border:none;padding:10px 25px;border-radius:20px;font-weight:600;cursor:pointer;font-size:14px;box-shadow:0 4px 10px rgba(10,92,54,0.2);}
            .btn-print:hover{background:#064e3b;}
            .btn-close{background:#dc3545;color:white;border:none;padding:10px 25px;border-radius:20px;font-weight:600;cursor:pointer;font-size:14px;box-shadow:0 4px 10px rgba(220,53,69,0.2);}
            .btn-close:hover{background:#bb2d3b;}
          </style></head><body>
            <div class="id-card">
              <div class="header">
                <h3>DARUNNAJATH SHAREEATH & ARTS COLLEGE</h3>
                <p>Punnakkad, Karuvarakundu | Official Student ID Card</p>
              </div>
              <div class="content">
                <div class="photo-qr-row">
                  <div class="photo-section"><img src="${photoURL}" alt="Photo" class="student-photo"></div>
                  <div class="qr-section"><div class="qr-code"><img src="${qrURL}" alt="QR"></div><div class="qr-label">SCAN TO VERIFY</div></div>
                </div>
                <h2 class="student-name">${s.FullName}</h2>
                <div class="details">
                  <div class="detail-row"><span class="detail-label">ADMISSION NO:</span><span class="detail-value">${s.UID}</span></div>
                  <div class="detail-row"><span class="detail-label">FATHER:</span><span class="detail-value">${s.FatherName}</span></div>
                  <div class="detail-row"><span class="detail-label">DATE OF BIRTH:</span><span class="detail-value">${formattedDOB}</span></div>
                  <div class="detail-row"><span class="detail-label">BATCH:</span><span class="detail-value">${s.BatchNumber}</span></div>
                  <div class="detail-row"><span class="detail-label">PHONE:</span><span class="detail-value">${s.Phone}</span></div>
                </div>
                <div class="footer">
                  <div class="year">ACADEMIC YEAR 2025-26</div>
                  <div class="signature">PRINCIPAL'S SIGNATURE</div>
                </div>
              </div>
            </div>
            <div class="controls no-print">
              <button class="btn-print" onclick="window.print()">üñ®Ô∏è Print ID Card</button>
              <button class="btn-close" onclick="window.close()">‚úï Close Window</button>
            </div>
          </body></html>`;
          newWin.document.open();newWin.document.write(html);newWin.document.close();
        }else{
          newWin.document.write(`<html><head><style>body{font-family:Poppins;text-align:center;padding:50px;background:#f0f4ff;}.error-container{max-width:400px;margin:0 auto;}h2{color:#dc3545;margin-bottom:20px;}button{background:#0a5c36;color:white;border:none;padding:12px 30px;border-radius:25px;margin-top:20px;cursor:pointer;font-size:16px;}</style></head><body><div class="error-container"><h2>Student Not Found</h2><p>${data.message||'Check Admission Number and Date of Birth.'}</p><button onclick="window.close()">Go Back</button></div></body></html>`);
        }
      }).catch(()=>{
        newWin.document.write(`<html><body style="font-family:Poppins;text-align:center;padding:50px;background:#f0f4ff;"><div style="color:#dc3545;"><h2>Connection Error</h2><p>Please try again later.</p><button onclick="window.close()" style="background:#0a5c36;color:white;border:none;padding:10px 20px;border-radius:25px;margin-top:20px;">Go Back</button></div></body></html>`);
      });
    });
  </script>
  <script>
    fetch('navbar.html').then(response=>response.text()).then(data=>{
      document.getElementById('navbar-container').innerHTML=data;
      document.querySelectorAll('.submenu-toggle').forEach(function(toggle){
        toggle.addEventListener('click',function(e){
          e.stopPropagation();e.preventDefault();
          const target=document.querySelector(toggle.getAttribute('data-bs-target'));
          new bootstrap.Collapse(target,{toggle:true});
        });
      });
    }).catch(error=>console.error('Navbar error:',error));
    fetch('footer.html').then(response=>response.text()).then(data=>{document.getElementById('footer-container').innerHTML=data;}).catch(error=>console.error('Footer error:',error));
    document.addEventListener('DOMContentLoaded',function(){document.body.style.opacity='0';document.body.style.transition='opacity 0.3s ease';setTimeout(()=>{document.body.style.opacity='1';},50);});
  </script>
</body>
</html>
